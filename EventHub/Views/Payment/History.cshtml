@model EventHub.Models.ViewModels.PaymentHistoryViewModel
@{
    ViewData["Title"] = "Payment History - EventHub";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <style>
        .page-header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 2rem 0;
        }
        .payment-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }
        .payment-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }
        .payment-status-success {
            background: #d1fae5;
            color: #065f46;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
        }
        .payment-status-failed {
            background: #fee2e2;
            color: #991b1b;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
        }
    </style>
}

<section class="page-header">
    <div class="container-fluid">
        <h1 class="page-title">Payment History</h1>
        <p class="page-subtitle">View all your payment transactions</p>
    </div>
</section>

<section class="py-4">
    <div class="container-fluid">
        <!-- Summary Cards -->
        <div class="row g-4 mb-4">
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h3>@Model.TotalPayments</h3>
                        <p class="text-muted mb-0">Total Payments</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h3 class="text-success">@Model.TotalAmountPaid.ToString("C")</h3>
                        <p class="text-muted mb-0">Total Spent</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h3 class="text-success">@Model.SuccessfulPayments</h3>
                        <p class="text-muted mb-0">Successful</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h3 class="text-danger">@Model.FailedPayments</h3>
                        <p class="text-muted mb-0">Failed</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment List -->
        @if (Model.Payments != null && Model.Payments.Any())
        {
            @foreach (var payment in Model.Payments)
            {
                <div class="payment-card">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h5>@payment.EventTitle</h5>
                            <p class="text-muted mb-2">
                                <i class="bi bi-calendar me-2"></i>@payment.PaymentDate.ToString("MMM dd, yyyy 'at' hh:mm tt")
                            </p>
                            <p class="mb-0">
                                <strong>Amount:</strong> <span class="text-success">@payment.Amount.ToString("C")</span> | 
                                <strong>Method:</strong> @payment.PaymentMethod | 
                                <strong>Ref:</strong> #@payment.BookingReference
                            </p>
                        </div>
                        <div>
                            <span class="payment-status-@(payment.Status.ToLower() == "completed" ? "success" : "failed")">
                                @payment.Status
                            </span>
                        </div>
                    </div>
                    <div class="mt-3">
                        <a href="@Url.Action("Details", "Booking", new { id = payment.BookingId })" 
                           class="btn btn-sm btn-outline-primary">View Booking</a>
                        <a href="@Url.Action("Receipt", "Payment", new { id = payment.Id })" 
                           class="btn btn-sm btn-outline-secondary">Download Receipt</a>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="text-center py-5">
                <i class="bi bi-wallet2 display-1 text-muted"></i>
                <h4 class="mt-3">No Payment History</h4>
                <p class="text-muted">Your payment transactions will appear here</p>
            </div>
        }
    </div>
</section>


